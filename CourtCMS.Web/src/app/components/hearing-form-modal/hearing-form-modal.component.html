@if (isOpen) {
  <!-- BACKDROP: Dark overlay behind modal -->
  <div class="modal-backdrop" (click)="onClose()">
    <!-- MODAL CONTAINER -->
    <div class="modal-container" (click)="onModalClick($event)">
      <!-- HEADER -->
      <div class="modal-header">
        <h3>{{ isEditMode ? 'Edit Hearing' : 'Add Hearing' }}</h3>
        <button class="btn-close-x" (click)="onClose()" aria-label="Close modal">&times;</button>
      </div>

      <!-- BODY -->
      <div class="modal-body">
        <form [formGroup]="hearingForm" (ngSubmit)="onSubmit()" id="hearingForm">
          <fieldset [disabled]="isSaving">
            <!-- DESCRIPTION -->
            <div class="form-group">
              <label for="description">Description</label>
              <input
                type="text"
                id="description"
                formControlName="description"
                placeholder="e.g. Preliminary Hearing"
                [class.invalid]="showError('description')"
              />
              @if (showError('description')) {
                <span class="error-message">
                  @if (hearingForm.get('description')?.errors?.['required']) {
                    Description is required.
                  } @else if (hearingForm.get('description')?.errors?.['minlength']) {
                    Must be at least 3 characters.
                  }
                </span>
              }
            </div>

            <!-- HEARING DATE & TIME -->
            <div class="form-group">
              <label for="hearingDate">Hearing Date & Time</label>
              <input
                type="datetime-local"
                id="hearingDate"
                formControlName="hearingDate"
                [class.invalid]="showError('hearingDate')"
              />
              @if (showError('hearingDate')) {
                <span class="error-message">
                  @if (hearingForm.get('hearingDate')?.errors?.['required']) {
                    A hearing date and time is required.
                  }
                </span>
              }
            </div>

            <!-- LOCATION -->
            <div class="form-group">
              <label for="location">Location</label>
              <input
                type="text"
                id="location"
                formControlName="location"
                placeholder="e.g. Courtroom 101"
                [class.invalid]="showError('location')"
              />
              @if (showError('location')) {
                <span class="error-message">
                  @if (hearingForm.get('location')?.errors?.['required']) {
                    Location is required.
                  } @else if (hearingForm.get('location')?.errors?.['minlength']) {
                    Must be at least 3 characters.
                  }
                </span>
              }
            </div>
          </fieldset>
        </form>
      </div>

      <!-- FOOTER -->
      <div class="modal-footer">
        <button class="btn-cancel" type="button" (click)="onClose()">Cancel</button>
        <button class="btn-save" type="submit" form="hearingForm" [disabled]="isSubmitDisabled">
          {{ isSaving ? 'Saving...' : isEditMode ? 'Update Hearing' : 'Add Hearing' }}
        </button>
      </div>
    </div>
  </div>
}
